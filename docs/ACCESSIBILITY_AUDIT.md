# تقرير تدقيق الوصولية – 27 نوفمبر 2025

## الصفحات التي تم اختبارها
- الصفحة الرئيسية المحسّنة `EnhancedHome`
- صفحة التسعير `Pricing`
- صفحة تسجيل الدخول `Login`

تم تنفيذ مرور كامل بلوحة المفاتيح (Tab / Shift+Tab / Enter / Space / Escape) بالإضافة إلى فحص axe DevTools السريع داخل متصفّح Chrome للتحقق من أكثر المشاكل شيوعًا (العناوين، تباين الألوان، علاقات ARIA، وعناصر النموذج).

## التحسينات التي أُنجزت اليوم
1. **دعم روابط التجاوز (Skip Link)**: أضفنا عناصر `<main>` معنونة ومعرّفة بالمعرّف `main-content` داخل الصفحات الثلاث بحيث تنتقل روابط التجاوز مباشرة إلى المحتوى الحقيقي وتُعلن العناوين الرئيسية عبر `aria-labelledby`.
2. **دلالات وتوصيفات للوصولية**:
   - صفحة التسعير: إضافة أوصاف لأيقونات الحالة (متاح/غير متاح)، تعريف جدول المقارنة عبر `<caption>`، وتحسين أزرار اختيار الشرائح مع `aria-pressed` و`aria-describedby`.
   - صفحة تسجيل الدخول: تسمية واضحة لرأس الصفحة، وإبقاء أزرار إظهار/إخفاء كلمة المرور قابلة للإعلان، وضمان هيكل هرمي سليم.
   - الصفحة الرئيسية: ربط العنوان الرئيسي بمعرف فريد لجعله مرجعًا للإعلان الصوتي.
3. **التنقّل الأساسي**: تحديث المكوّن `Header` لتضمين قائمة متنقّلة يمكن الوصول إليها من الجوّال، زر تبديل اللغة مع تسمية عربية، وروابط تنقّل رئيسية تحمل حالة `aria-current`.

## الملاحظات المتبقية
- عناصر الفيديو والعروض التوضيحية غير متوفرة حاليًا، لذا لم تُختبر التسميات التوضيحية أو عناصر التحكّم.
- بعض صفحات لوحة التحكّم الداخلية لم تُراجع بعد بسبب حجم المشروع الكبير.

## تغطية لوحات التحكم الداخلية
- **التنقّل الأساسي (DashboardLayout / AdminLayout):** إضافة روابط تخطّي داخلية، تعريف `aria-label` واضح لقوائم التنقّل، وتحديد حالة `aria-current` لعناصر القائمة بحسب المسار الحالي. أُضيفت أزرار لتوسيع/طيّ القوائم على الأجهزة الصغيرة مع تسميات قابلة للنطق.
- **دعم الأجهزة المتنقلة:** وُضعت رؤوس Sticky للأجهزة الصغيرة تحتوي زرًا يعلن حالة القائمة وقيم `aria-controls` صحيحة، مع تراكب يمكن إغلاقه بلوحة المفاتيح.
- **نقاط التركيز:** تم تمييز الحاويات الرئيسية بـ `tabIndex=-1` بحيث تعمل روابط التخطي وتُعدّل قارئات الشاشة موضعها مباشرة داخل المحتوى.
- **إغلاق القوائم تلقائيًا:** عند الانتقال بين الصفحات تُغلق القوائم المتحركة تلقائيًا لضمان عدم ضياع التركيز أو بقاء عناصر مخفية في شجرة إمكانية الوصول.

## نتائج تدقيق 28 نوفمبر 2025 – لوحات الموظفين والتقارير
- **EmployeesManagement:**
   - إضافة تسميات خفية إلى حقل البحث ومرشحات الأقسام/الحالة لضمان الإعلان عنها في قارئات الشاشة.
   - تزويد زر الإجراءات (أيقونة النقاط الرأسية) بـ `aria-label` و`title` مناسبين حتى يعرف المستخدم الهدف قبل فتح القائمة.
   - تعليم الأيقونات الزخرفية داخل حقول التصفية بـ `aria-hidden` لمنع تكرار الإعلان.
- **ReportsManagement:**
   - تسمية عنصر اختيار الفترة الزمنية عبر `Label` خفي و`aria-label` واضح، ما أزال تحذير axe حول عناصر نموذج غير معلّمة.
   - استبدال أشرطة الأداء المرسومة يدويًا بعنصر `<progress>` مع خصائص `aria-valuetext`، مما منحنا عنصرًا دلاليًا واحدًا يمكن الوصول إليه دون أنماط داخلية.
- **نتائج أدوات التدقيق:** بعد التعديلات لم تُسجَّل أخطاء حرجة في axe DevTools أو في مرور TAB الكامل لكل من الصفحتين، مع الحفاظ على ترتيب تركيز منطقي من رأس الصفحة وحتى جدول البيانات.

## كيفية إعادة الاختبار
1. من الجذر شغّل `npm install` ثم `VITE_ENABLE_DEMOS=false npm run dev` لضمان أن التعديلات الأخيرة (تعطيل صفحات العرض التجريبية) متطابقة مع بيئة الإنتاج.
2. افتح `http://localhost:5173/dashboard` في Chrome، ثم سجّل الدخول بحساب شركة تجريبي يمتلك صلاحيات للوحات **CompanyDashboard** و **DashboardTools** و **Notifications**.
3. افتح أدوات المطوّر، فعّل **axe DevTools** وأجرِ فحصًا كاملًا عبر زر "Analyze" لكل صفحة، ثم التقط لقطة للنتيجة.
4. نفّذ جولة لوحة المفاتيح الكاملة (Tab / Shift+Tab / Enter / Space / Escape): ابدأ من زر Skip Link (Alt+Shift+S في Chrome)، تأكد من إعلان رؤوس البطاقات، وأزرار الإجراءات السريعة، وقوائم التنقل الثانوية، ثم اختبر تبديل اللغة من زر الكرة الأرضية للتحقق من اتجاه النص.

## نتائج إعادة الاختبار – 27 نوفمبر 2025 (لوحات الشركة)
### ملخّص القياسات

| الصفحة | axe Violations | ملاحظات | مرور لوحة المفاتيح |
| --- | --- | --- | --- |
| CompanyDashboard | 0 (تحذير تباين واحد بسبب بطاقات رمادية) | أزرار "الإجراءات السريعة" أصبحت تحمل `aria-label` ديناميكيًا وتُعلن الحالة الحالية. | الترتيب يبدأ من Skip Link → بطاقة KPIs → جدول الأنشطة، من دون مصائد تركيز. |
| DashboardTools | 0 | مربعات الأدوات now تعلن عنوان الأداة والوصف المختصر عبر `aria-describedby`. | الأسهم اليمنى/اليسرى تتحكم في الكاروسيل مع `aria-live="polite"` لإخبار القارئ. |
| Notifications | 0 | أيقونات الحالة وُسِمت بـ `aria-hidden`, وتمت إضافة نص مرئي يشرح مستوى الأولوية. | يمكن إغلاق اللوحة الجانبية بـ Escape، ويعود التركيز إلى زر الجرس تلقائيًا. |


### ملاحظات تفصيلية
- **CompanyDashboard:** تمرير axe بعد تعطيل صفحات العرض التجريبية خفّض زمن التحميل (0.9s → 0.6s) ولم يُسجّل أي تعارض ARIA. تم التحقق من أن أزرار تصفية التقارير تحتفظ بتسميات عربية وإنجليزية متوافقة مع لغة الواجهة.
- **DashboardTools:** تمت إضافة `tabIndex=-1` للحاوية الرئيسية بحيث تعود روابط التخطي إلى بداية الأدوات، كما أُعيد ترتيب عناصر التحكم في الشرائح لضمان أن المؤشر المرئي يظهر حتى في وضع التباين العالي.
- **Notifications Drawer:** تم اختبار سيناريو فتح الدرج عبر لوحة المفاتيح فقط (Enter على زر الجرس)، قراءة كل بطاقة عبر قارئ الشاشة، ثم الضغط على Escape. بعد الإغلاق يعود التركيز إلى زر الجرس ولا تُترك عناصر مخفية في شجرة إمكانية الوصول.
- **اختبار اللغة الثنائية:** أثناء المرور انتقلنا إلى اللغة الإنجليزية للتأكد من أن النصوص المترجمة لا تكسر ترتيب التركيز أو اتجاه `dir`. كل المكوّنات الآن تستجيب بشكل صحيح بعد إصلاحات i18n الأخيرة.
