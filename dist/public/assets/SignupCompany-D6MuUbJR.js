import{r as o,j as e}from"./ui-vendor-C96WIwkg.js";import{u as V,a as Z,t as L,b as u,i as ee,C as g,c as M,d as C,e as S,f as R,L as j,B as k,S as D,I as n,j as se,U as ae}from"./index-Bkz6h1fQ.js";import{B as re}from"./BackButton-rFUz39lD.js";import{L as i}from"./label-CmhXhWbA.js";import{C as P}from"./checkbox-CzTf8sql.js";import{S as X}from"./separator-DBdTAbb0.js";import{B as F}from"./badge-DdDRUR73.js";import{S as I}from"./skeleton-CH6Aula-.js";import{B as z}from"./building-2-Dknnor09.js";import{G as te}from"./globe-C0XigMvz.js";import{M as le}from"./map-pin-Dk8EH_HJ.js";import{P as ie}from"./phone-CtgVkH_z.js";import{M as ce}from"./mail-hhykUda4.js";import{L as H}from"./lock-CN3EPsKv.js";import{E as O}from"./eye-off-N0ImDqp6.js";import{E as J}from"./eye-D29FSyEF.js";import{C as ne}from"./circle-check-DlUG-57U.js";import{S as oe}from"./shield-check-CohldUcE.js";import"./react-vendor-DDxydHEc.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";import"./arrow-right-yQLf5R-N.js";import"./house-CS3RhUwS.js";const T="rabit-company-signup-draft",de=({title:N,active:v,done:p})=>e.jsxs("div",{className:`p-3 rounded-lg border flex items-center gap-2 text-sm ${v?"border-purple-500 bg-purple-50 text-purple-800":p?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600"}`,children:[p?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:N})]});function Le(){const{t:N,i18n:v}=V(),[,p]=Z(),a=v.language==="ar",[r,l]=o.useState({companyName:"",tradeNumber:"",taxNumber:"",industry:"",companySize:"",website:"",location:"",contactName:"",jobTitle:"",email:"",phone:"",password:"",confirmPassword:"",packageId:null}),[m,h]=o.useState({terms:!1,privacy:!1,marketing:!1}),[A,W]=o.useState(!1),[B,U]=o.useState(!1),[t,y]=o.useState(!1),[d,f]=o.useState(0),{data:x,isLoading:G}=L.consulting.getPackages.useQuery(void 0,{refetchOnWindowFocus:!1}),b=[{id:0,title:a?"بيانات الشركة":"Company info"},{id:1,title:a?"بيانات المسؤول":"Owner details"},{id:2,title:a?"الباقة والمراجعة":"Package & review"}];o.useEffect(()=>{try{const s=localStorage.getItem(T);if(s){const c=JSON.parse(s);l(c.formData??r),h(c.agreements??m),f(c.currentStep??0)}}catch{}},[]),o.useEffect(()=>{const s={formData:r,agreements:m,currentStep:d};localStorage.setItem(T,JSON.stringify(s))},[r,m,d]),o.useEffect(()=>{!r.packageId&&x?.packages?.length&&l(s=>({...s,packageId:x.packages[0].id}))},[r.packageId,x]);const $=L.auth.register.useMutation({onSuccess:s=>{u.success(a?"تم إنشاء حساب الشركة بنجاح":"Company account created successfully"),localStorage.removeItem(T),localStorage.setItem("user",JSON.stringify(s.user));const c=s.token||s.accessToken;c&&localStorage.setItem("token",c);const _=ee(s.user);setTimeout(()=>p(_),600)},onError:s=>{u.error(s.message||N("signup.error")),y(!1)},onSettled:()=>y(!1)});o.useMemo(()=>x?.packages?.find(s=>s.id===r.packageId)||null,[x,r.packageId]);const w=s=>s===0?!!r.companyName:s===1?r.contactName&&r.email&&r.phone&&r.password&&r.confirmPassword&&r.password===r.confirmPassword&&r.password.length>=8:s===2?m.terms&&m.privacy:!0,q=()=>{if(!w(d)){u.error(a?"أكمل الحقول المطلوبة في هذه الخطوة":"Please complete required fields");return}f(s=>Math.min(s+1,b.length-1))},K=()=>f(s=>Math.max(s-1,0)),E=s=>{if(s&&s.preventDefault(),!w(1)||!w(2)){u.error(a?"أكمل البيانات والاتفاقيات قبل المتابعة":"Complete data and agreements first");return}y(!0),$.mutate({name:r.companyName,email:r.email,password:r.password,phoneNumber:r.phone,userType:"company"})},Q=[a?"إدارة الموظفين والملفات":"Employee & docs management",a?"نظام ATS كامل":"Full ATS pipeline",a?"التذاكر والمهام":"Tickets & tasks",a?"الأدوات الذكية":"Smart HR tools",a?"تنبيهات وإشعارات":"Alerts & notifications",a?"تقارير متقدمة":"Advanced analytics"],Y=()=>d===0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"companyName",children:[a?"اسم الشركة":"Company Name"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"companyName",type:"text",placeholder:a?"شركة الموارد البشرية المتحدة":"Rabit HR Solutions",className:"pr-10",value:r.companyName,onChange:s=>l({...r,companyName:s.target.value}),disabled:t})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tradeNumber",children:a?"السجل التجاري":"Trade license"}),e.jsx(n,{id:"tradeNumber",type:"text",placeholder:"1010xxxx",value:r.tradeNumber,onChange:s=>l({...r,tradeNumber:s.target.value}),disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"taxNumber",children:a?"الرقم الضريبي":"Tax number"}),e.jsx(n,{id:"taxNumber",type:"text",placeholder:"3xx-xxxx-xxxxxx",value:r.taxNumber,onChange:s=>l({...r,taxNumber:s.target.value}),disabled:t})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"industry",children:a?"القطاع":"Industry"}),e.jsx(n,{id:"industry",type:"text",placeholder:a?"تقنية / خدمات / تصنيع":"Tech / Services / Manufacturing",value:r.industry,onChange:s=>l({...r,industry:s.target.value}),disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"companySize",children:a?"حجم الشركة":"Company Size"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"companySize",type:"text",placeholder:a?"11-50 موظف":"11-50 employees",className:"pr-10",value:r.companySize,onChange:s=>l({...r,companySize:s.target.value}),disabled:t})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"website",children:a?"الموقع الإلكتروني":"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"website",type:"url",placeholder:"https://company.com",className:"pr-10",value:r.website,onChange:s=>l({...r,website:s.target.value}),disabled:t,dir:"ltr"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"location",children:a?"الموقع":"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"location",type:"text",placeholder:a?"الرياض، السعودية":"Riyadh, Saudi Arabia",className:"pr-10",value:r.location,onChange:s=>l({...r,location:s.target.value}),disabled:t})]})]})]})]}):d===1?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"contactName",children:[a?"اسم المسؤول":"Contact Person"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"contactName",type:"text",placeholder:a?"أحمد محمد":"Ahmad Mohammed",className:"pr-10",value:r.contactName,onChange:s=>l({...r,contactName:s.target.value}),disabled:t})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"jobTitle",children:a?"المسمى الوظيفي":"Job Title"}),e.jsx(n,{id:"jobTitle",type:"text",placeholder:a?"مدير موارد بشرية":"HR Manager",value:r.jobTitle,onChange:s=>l({...r,jobTitle:s.target.value}),disabled:t})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"phone",children:[a?"رقم الجوال":"Phone Number"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"phone",type:"tel",placeholder:"05XXXXXXXX",className:"pr-10",value:r.phone,onChange:s=>l({...r,phone:s.target.value}),disabled:t,dir:"ltr"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"email",children:[a?"البريد الإلكتروني":"Email"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"email",type:"email",placeholder:"admin@company.com",className:"pr-10",value:r.email,onChange:s=>l({...r,email:s.target.value}),disabled:t,dir:"ltr"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"password",children:[a?"كلمة المرور":"Password"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"password",type:A?"text":"password",placeholder:"••••••••",className:"pr-10 pl-10",value:r.password,onChange:s=>l({...r,password:s.target.value}),disabled:t}),e.jsx("button",{type:"button",className:"absolute left-3 top-2.5 text-gray-500",onClick:()=>W(s=>!s),"aria-label":a?"عرض كلمة المرور":"Show password",children:A?e.jsx(O,{className:"h-5 w-5"}):e.jsx(J,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"confirmPassword",children:[a?"تأكيد كلمة المرور":"Confirm Password"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{id:"confirmPassword",type:B?"text":"password",placeholder:"••••••••",className:"pr-10 pl-10",value:r.confirmPassword,onChange:s=>l({...r,confirmPassword:s.target.value}),disabled:t}),e.jsx("button",{type:"button",className:"absolute left-3 top-2.5 text-gray-500",onClick:()=>U(s=>!s),"aria-label":a?"عرض كلمة المرور":"Show password",children:B?e.jsx(O,{className:"h-5 w-5"}):e.jsx(J,{className:"h-5 w-5"})})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a?"اختر الباقة المناسبة. يمكن تغييرها لاحقاً من الإعدادات.":"Pick a package; you can switch later from settings."}),G?e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:[1,2].map(s=>e.jsxs(g,{className:"p-4",children:[e.jsx(I,{className:"h-5 w-32 mb-2"}),e.jsx(I,{className:"h-4 w-24 mb-4"}),e.jsx(I,{className:"h-10 w-full"})]},s))}):e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:x?.packages?.map(s=>e.jsxs(g,{className:`p-4 cursor-pointer border-2 ${r.packageId===s.id?"border-purple-500 shadow":"border-transparent hover:border-slate-200"}`,onClick:()=>l(c=>({...c,packageId:s.id})),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(C,{className:"text-lg",children:s.name}),s.description&&e.jsx(S,{className:"mt-1 text-sm",children:s.description})]}),e.jsxs(F,{variant:"secondary",className:"text-xs",children:["SLA ",s.slaHours||24,"h"]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[s.priceSAR??s.price??0," ريال"]}),s.duration&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a?"مدة الجلسة":"Session length"," ~"," ",s.duration," ",a?"دقيقة":"min"]})]})]},s.id))})]}),e.jsx(X,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(P,{id:"terms",checked:m.terms,onCheckedChange:s=>h(c=>({...c,terms:!!s})),disabled:t}),e.jsx(i,{htmlFor:"terms",className:"text-sm",children:a?"أوافق على الشروط والأحكام":"I agree to the terms and conditions"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(P,{id:"privacy",checked:m.privacy,onCheckedChange:s=>h(c=>({...c,privacy:!!s})),disabled:t}),e.jsx(i,{htmlFor:"privacy",className:"text-sm",children:a?"أوافق على سياسة الخصوصية":"I agree to the privacy policy"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(P,{id:"marketing",checked:m.marketing,onCheckedChange:s=>h(c=>({...c,marketing:!!s})),disabled:t}),e.jsx(i,{htmlFor:"marketing",className:"text-sm",children:a?"أرغب في استلام تحديثات وعروض":"I want to receive updates and offers"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-blue-950/40 dark:to-purple-950/40 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsx(re,{}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(z,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:a?"إنشاء حساب شركة":"Create Company Account"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"رحلة بثلاث خطوات: بيانات، مسؤول، باقة — مع حفظ مسودة تلقائي.":"A 3-step journey: company, owner, package — with autosave."}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[e.jsx(F,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:a?"ابتداءً من 599 ريال/شهر":"From 599 SAR/month"}),e.jsx(F,{variant:"outline",children:a?"تجربة مجانية 14 يوم":"14-day free trial"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(g,{className:"lg:col-span-2 shadow-xl",children:[e.jsxs(M,{className:"pb-2",children:[e.jsx(C,{children:a?"خطوات التسجيل":"Sign-up steps"}),e.jsx(S,{children:a?"نراجع الحقول الأساسية، ثم نختار الباقة، ثم ننشئ الحساب.":"We capture essentials, select a package, then create your account."}),e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-3",children:b.map(s=>e.jsx(de,{title:s.title,active:s.id===d,done:s.id<d},s.id))})]}),e.jsx(R,{children:e.jsx("form",{onSubmit:E,className:"space-y-6",children:Y()})}),e.jsxs("div",{className:"px-6 pb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a?"سجّل للدخول؟":"Already have an account?"," ",e.jsx(j,{href:"/login",className:"text-primary hover:underline",children:a?"تسجيل الدخول":"Login"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d>0&&e.jsx(k,{variant:"outline",onClick:K,disabled:t,children:a?"السابق":"Back"}),d<b.length-1?e.jsx(k,{onClick:q,disabled:t,children:a?"التالي":"Next"}):e.jsx(k,{onClick:()=>E(),disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),a?"جاري التسجيل...":"Signing up..."]}):e.jsx(e.Fragment,{children:a?"إنشاء حساب شركة":"Create Company Account"})})]})]})]}),e.jsxs(g,{className:"shadow-xl",children:[e.jsxs(M,{children:[e.jsx(C,{children:a?"لماذا رابِط للشركات؟":"Why Rabit for Companies?"}),e.jsx(S,{children:a?"حلول متكاملة للموارد البشرية":"Integrated HR solutions"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/60 rounded-lg border",children:[e.jsx(D,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a?"تشغيل متكامل":"End-to-end operations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"من التوظيف إلى نهاية الخدمة مع لوحة تحكم واحدة":"From hiring to exit in one dashboard"})]})]}),e.jsx("div",{className:"space-y-2",children:Q.map(s=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600"}),e.jsx("span",{children:s})]},s))}),e.jsx(X,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"بالنقر على التسجيل، أنت توافق على":"By signing up you agree to our"}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx(j,{href:"/terms",className:"text-primary hover:underline",children:a?"الشروط":"Terms"}),e.jsx("span",{children:"•"}),e.jsx(j,{href:"/privacy",className:"text-primary hover:underline",children:a?"الخصوصية":"Privacy"}),e.jsx("span",{children:"•"}),e.jsx(j,{href:"/cookies",className:"text-primary hover:underline",children:a?"الكوكيز":"Cookies"})]})]})]})]})]})]})]})}export{Le as default};
