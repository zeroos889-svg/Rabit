import{r as i,j as e}from"./ui-vendor-C96WIwkg.js";import{h as le,u as ne,t as ie,L as $,P as ce,B as m,o as de,S as q,C as x,c as p,d as j,F as oe,e as g,f as h,I as S,r as me,b as u}from"./index-Bkz6h1fQ.js";import{L as f}from"./label-CmhXhWbA.js";import{S as xe,a as he,b as ue,c as pe,d as o}from"./select-B0y6YODy.js";import{S as T}from"./separator-DBdTAbb0.js";import{B as y}from"./badge-DdDRUR73.js";import{T as je}from"./textarea-CDZ7LSXO.js";import{P as G}from"./plus-0j2KamQO.js";import{C as ge}from"./clock-BFXiIUou.js";import{T as fe}from"./trash-2-Dqtod12U.js";import{D as ye}from"./download-BYvKutrd.js";import{C as ve}from"./chart-column-D_-lOMZP.js";import{I as Ne}from"./info-BeKmpOzT.js";import"./react-vendor-DDxydHEc.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=le("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);function Ye(){const{t:we,i18n:H}=ne();H.language;const[C,J]=i.useState(""),[_,K]=i.useState(""),[v,L]=i.useState(""),[c,A]=i.useState(""),[d,I]=i.useState(""),[n,F]=i.useState([]),[N,W]=i.useState(""),[E,X]=i.useState(""),[B,M]=i.useState(!1),Z=ie.leave.askAI.useMutation(),r=(()=>{const t=(parseFloat(C)||0)>=5?30:21,b=n.filter(a=>a.type==="annual"&&a.status==="approved").reduce((a,l)=>a+l.days,0),w=120,k=n.filter(a=>a.type==="sick"&&a.status==="approved").reduce((a,l)=>a+l.days,0),D=70,U=n.filter(a=>a.type==="maternity"&&a.status==="approved").reduce((a,l)=>a+l.days,0),z=10,R=n.filter(a=>a.type==="hajj"&&a.status==="approved").reduce((a,l)=>a+l.days,0),O=5,Y=n.filter(a=>a.type==="marriage"&&a.status==="approved").reduce((a,l)=>a+l.days,0),Q=5,V=n.filter(a=>a.type==="bereavement"&&a.status==="approved").reduce((a,l)=>a+l.days,0);return{annual:{total:t,used:b,remaining:t-b},sick:{total:w,used:k,remaining:w-k},maternity:{total:D,used:U,remaining:D-U},hajj:{total:z,used:R,remaining:z-R},marriage:{total:O,used:Y,remaining:O-Y},bereavement:{total:Q,used:V,remaining:Q-V}}})(),P=(s,t)=>{if(!s||!t)return 0;const b=new Date(s),w=new Date(t),k=Math.abs(w.getTime()-b.getTime());return Math.ceil(k/(1e3*60*60*24))+1},ee=()=>{if(!v||!c||!d){u.error("يرجى ملء جميع الحقول");return}const s=P(c,d),t={id:Date.now().toString(),type:v,startDate:c,endDate:d,days:s,status:"approved"};F([...n,t]),u.success("تم إضافة الإجازة بنجاح"),L(""),A(""),I("")},se=s=>{F(n.filter(t=>t.id!==s)),u.success("تم حذف الإجازة")},ae=async()=>{if(N.trim()){M(!0),u.info("جاري الحصول على الإجابة...");try{const s=await Z.mutateAsync({question:N,context:{employeeYears:parseFloat(C)||void 0}}),t=typeof s.answer=="string"?s.answer:JSON.stringify(s.answer);X(t),u.success("تم الحصول على الإجابة")}catch(s){console.error("AI Error:",s),u.error("حدث خطأ في الحصول على الإجابة")}finally{M(!1)}}},te=s=>({annual:"إجازة سنوية",sick:"إجازة مرضية",maternity:"إجازة أمومة",hajj:"إجازة حج",marriage:"إجازة زواج",bereavement:"إجازة وفاة",exam:"إجازة امتحانات"})[s]||s,re=s=>({approved:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",rejected:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"})[s]||"";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[e.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:e.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[e.jsx($,{href:"/",children:e.jsx("a",{className:"flex items-center gap-2",children:e.jsx("img",{src:ce,alt:"Rabit",className:"h-8"})})}),e.jsx(m,{variant:"ghost",asChild:!0,children:e.jsx($,{href:"/",children:e.jsx("a",{children:"العودة للرئيسية"})})})]})}),e.jsxs("div",{className:"container py-8 md:py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full gradient-primary mb-4",children:e.jsx(de,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3",children:"حاسبة الإجازات"}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto flex items-center justify-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),"احسب وتتبع جميع أنواع الإجازات - مدعومة بالذكاء الاصطناعي"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(x,{className:"shadow-lg",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),"معلومات الموظف"]}),e.jsx(g,{children:"أدخل معلومات الموظف لحساب الإجازات المستحقة"})]}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"employee-years",children:"عدد سنوات الخدمة *"}),e.jsx(S,{id:"employee-years",type:"number",placeholder:"مثال: 3",value:C,onChange:s=>J(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"يؤثر على عدد أيام الإجازة السنوية"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"monthly-salary",children:"الراتب الإجمالي الشهري *"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{id:"monthly-salary",type:"number",placeholder:"مثال: 10000",value:_,onChange:s=>K(s.target.value),className:"pl-12"}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-bold",children:"﷼"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"لحساب تكلفة الإجازات"})]})]})})]}),e.jsxs(x,{className:"shadow-lg",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),"إضافة إجازة"]}),e.jsx(g,{children:"أضف إجازة جديدة لحساب الرصيد المتبقي"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"leave-type",children:"نوع الإجازة *"}),e.jsxs(xe,{value:v,onValueChange:L,children:[e.jsx(he,{id:"leave-type",children:e.jsx(ue,{placeholder:"اختر نوع الإجازة"})}),e.jsxs(pe,{children:[e.jsx(o,{value:"annual",children:"إجازة سنوية (21-30 يوم)"}),e.jsx(o,{value:"sick",children:"إجازة مرضية (120 يوم)"}),e.jsx(o,{value:"maternity",children:"إجازة أمومة (70 يوم)"}),e.jsx(o,{value:"hajj",children:"إجازة حج (10 أيام)"}),e.jsx(o,{value:"marriage",children:"إجازة زواج (5 أيام)"}),e.jsx(o,{value:"bereavement",children:"إجازة وفاة (3-5 أيام)"}),e.jsx(o,{value:"exam",children:"إجازة امتحانات"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"start-date",children:"تاريخ البداية *"}),e.jsx(S,{id:"start-date",type:"date",value:c,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"end-date",children:"تاريخ النهاية *"}),e.jsx(S,{id:"end-date",type:"date",value:d,onChange:s=>I(s.target.value)})]})]}),c&&d&&e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"عدد الأيام:"}),e.jsxs("p",{className:"text-2xl font-bold gradient-text",children:[P(c,d)," يوم"]})]}),e.jsxs(m,{onClick:ee,className:"w-full gradient-primary",disabled:!v||!c||!d,children:[e.jsx(G,{className:"h-4 w-4 ml-2"}),"إضافة الإجازة"]})]})]}),n.length>0&&e.jsxs(x,{className:"shadow-lg",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-primary"}),"سجل الإجازات"]}),e.jsx(g,{children:"جميع الإجازات المسجلة"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:te(s.type)}),e.jsx(y,{className:re(s.status),children:s.status==="approved"?"معتمدة":s.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(s.startDate).toLocaleDateString("ar-SA")," ","-"," ",new Date(s.endDate).toLocaleDateString("ar-SA")," ","(",s.days," يوم)"]})]}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>se(s.id),children:e.jsx(fe,{className:"h-4 w-4 text-destructive"})})]},s.id))})})]}),e.jsxs(x,{className:"shadow-lg border-purple-200 dark:border-purple-800",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),"المساعد الذكي للإجازات"]}),e.jsx(g,{children:"اسأل أي سؤال عن أنواع الإجازات وحقوقك"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{placeholder:"مثال: كم يوم إجازة سنوية أستحق بعد 3 سنوات خدمة؟",value:N,onChange:s=>W(s.target.value),rows:3}),e.jsxs(m,{onClick:ae,className:"w-full bg-purple-600 hover:bg-purple-700",disabled:!N.trim()||B,children:[e.jsx(q,{className:"h-4 w-4 ml-2"}),B?"جاري المعالجة...":"اسأل الذكاء الاصطناعي"]})]}),E&&e.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:e.jsx("p",{className:"text-sm",children:E})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{className:"shadow-lg border-primary/20 sticky top-20",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),"رصيد الإجازات"]}),e.jsx(g,{children:"الرصيد المتبقي لكل نوع إجازة"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"إجازة سنوية"}),e.jsxs("span",{className:"text-muted-foreground",children:[r.annual.remaining," / ",r.annual.total," يوم"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600",style:{width:`${r.annual.remaining/r.annual.total*100}%`}})})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"إجازة مرضية"}),e.jsxs("span",{className:"text-muted-foreground",children:[r.sick.remaining," / ",r.sick.total," يوم"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600",style:{width:`${r.sick.remaining/r.sick.total*100}%`}})})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"إجازة أمومة"}),e.jsxs(y,{variant:"secondary",children:[r.maternity.remaining," يوم"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"إجازة حج"}),e.jsxs(y,{variant:"secondary",children:[r.hajj.remaining," يوم"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"إجازة زواج"}),e.jsxs(y,{variant:"secondary",children:[r.marriage.remaining," يوم"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"إجازة وفاة"}),e.jsxs(y,{variant:"secondary",children:[r.bereavement.remaining," يوم"]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(ye,{className:"h-4 w-4 ml-2"}),"تصدير التقرير"]}),e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(ve,{className:"h-4 w-4 ml-2"}),"عرض الإحصائيات"]})]})]})]}),e.jsx(x,{className:"shadow-lg bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("p",{className:"font-medium mb-2",children:"معلومات مهمة"}),e.jsxs("ul",{className:"space-y-1 text-xs opacity-90",children:[e.jsx("li",{children:"• الإجازة السنوية: 21 يوم (1-4 سنوات)، 30 يوم (5+ سنوات)"}),e.jsx("li",{children:"• الإجازة المرضية: 30 يوم بأجر كامل + 60 يوم بـ75% + 30 يوم بدون أجر"}),e.jsx("li",{children:"• إجازة الأمومة: 10 أسابيع بأجر كامل"}),e.jsx("li",{children:"• إجازة الحج: مرة واحدة طوال الخدمة"})]})]})]})})})]})]})]})]})}export{Ye as default};
