import{r as C,j as e}from"./ui-vendor-C96WIwkg.js";import{h as T,m as O,a as E,t as j,b as f,L as I,B as s,C as r,c as i,d,f as n,e as h}from"./index-Bkz6h1fQ.js";import{T as g}from"./textarea-CDZ7LSXO.js";import{C as J}from"./chevron-left-DGiWmXbj.js";import{S as w}from"./shield-D1nyOWBv.js";import{C as Q}from"./circle-check-big-BG0Kvuh6.js";import{C as b}from"./circle-alert-BSV6M1IC.js";import{D as y}from"./download-BYvKutrd.js";import{S}from"./square-pen-D-j8Go0T.js";import{T as k}from"./trash-2-Dqtod12U.js";import"./react-vendor-DDxydHEc.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=T("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);function ee(){const{user:L,loading:R}=O(),[,q]=E(),[c,l]=C.useState(""),[o,x]=C.useState(null),{data:t}=j.privacy.getConsentStatus.useQuery(),{data:A}=j.privacy.getMyData.useQuery(),v=j.privacy.withdrawConsent.useMutation({onSuccess:()=>{f.success("تم سحب الموافقة بنجاح")}}),u=j.privacy.createRequest.useMutation({onSuccess:()=>{f.success("تم إرسال الطلب بنجاح. سنرد عليك خلال 30 يوم عمل."),l(""),x(null)}});if(R)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!L)return q("/login"),null;const m=a=>{if(a==="access"){const B=JSON.stringify(A,null,2),P=new Blob([B],{type:"application/json"}),M=URL.createObjectURL(P),N=document.createElement("a");N.href=M,N.download=`my-data-${new Date().toISOString()}.json`,N.click(),f.success("تم تحميل بياناتك بنجاح");return}if(a==="withdraw"){confirm("هل أنت متأكد من سحب موافقتك؟ قد يؤثر ذلك على قدرتك على استخدام بعض الخدمات.")&&v.mutate();return}x(a)},p=()=>{o&&u.mutate({type:o,payload:c})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12 px-4",children:e.jsxs("div",{className:"container max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(I,{href:"/",children:e.jsx(s,{variant:"ghost",size:"icon",children:e.jsx(J,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 mb-4",children:e.jsx(w,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"بياناتي"}),e.jsx("p",{className:"text-muted-foreground",children:"إدارة بياناتك الشخصية وممارسة حقوقك"})]})]}),e.jsxs(r,{className:"mb-6",children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[t?.hasConsent?e.jsx(Q,{className:"h-5 w-5 text-green-600"}):e.jsx(b,{className:"h-5 w-5 text-amber-600"}),"حالة الموافقة"]})}),e.jsx(n,{children:t?.hasConsent?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"لديك موافقة نشطة على سياسة الخصوصية"}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"الإصدار:"})," ",t.policyVersion]}),e.jsxs("p",{children:[e.jsx("strong",{children:"تاريخ الموافقة:"})," ",new Date(t.consentedAt||t.createdAt||new Date).toLocaleDateString("ar-SA")]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-amber-700",children:"تم سحب موافقتك على سياسة الخصوصية"}),t?.withdrawnAt&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["تاريخ السحب:"," ",new Date(t.withdrawnAt).toLocaleDateString("ar-SA")]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"حقوقك في بياناتك"}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(y,{className:"h-5 w-5 text-blue-600"}),"الحق في الوصول"]}),e.jsx(h,{children:"احصل على نسخة كاملة من جميع بياناتك الشخصية بصيغة JSON"})]}),e.jsx(n,{children:e.jsxs(s,{onClick:()=>m("access"),className:"w-full md:w-auto",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"تحميل بياناتي"]})})]}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(S,{className:"h-5 w-5 text-green-600"}),"الحق في التصحيح"]}),e.jsx(h,{children:"اطلب تصحيح أي بيانات غير صحيحة أو غير كاملة"})]}),e.jsx(n,{children:o==="correct"?e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{placeholder:"اذكر البيانات التي تريد تصحيحها والتصحيح المطلوب...",value:c,onChange:a=>l(a.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{onClick:p,disabled:!c||u.isPending,children:"إرسال الطلب"}),e.jsx(s,{variant:"outline",onClick:()=>{x(null),l("")},children:"إلغاء"})]})]}):e.jsxs(s,{onClick:()=>m("correct"),variant:"outline",className:"w-full md:w-auto",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"طلب تصحيح"]})})]}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(k,{className:"h-5 w-5 text-red-600"}),"الحق في الحذف"]}),e.jsx(h,{children:"اطلب حذف بياناتك الشخصية (قد يؤدي لإغلاق حسابك)"})]}),e.jsx(n,{children:o==="delete"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg text-sm text-red-900",children:[e.jsx(b,{className:"h-4 w-4 inline mr-2"}),"تنبيه: حذف بياناتك سيؤدي لإغلاق حسابك بشكل دائم"]}),e.jsx(g,{placeholder:"اذكر سبب طلب الحذف (اختياري)...",value:c,onChange:a=>l(a.target.value),rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{onClick:p,variant:"destructive",disabled:u.isPending,children:"تأكيد طلب الحذف"}),e.jsx(s,{variant:"outline",onClick:()=>{x(null),l("")},children:"إلغاء"})]})]}):e.jsxs(s,{onClick:()=>m("delete"),variant:"destructive",className:"w-full md:w-auto",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"طلب حذف البيانات"]})})]}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(D,{className:"h-5 w-5 text-amber-600"}),"الحق في الاعتراض"]}),e.jsx(h,{children:"اعترض على معالجة معينة لبياناتك"})]}),e.jsx(n,{children:o==="object"?e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{placeholder:"اذكر المعالجة التي تعترض عليها والسبب...",value:c,onChange:a=>l(a.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{onClick:p,disabled:!c||u.isPending,children:"إرسال الاعتراض"}),e.jsx(s,{variant:"outline",onClick:()=>{x(null),l("")},children:"إلغاء"})]})]}):e.jsxs(s,{onClick:()=>m("object"),variant:"outline",className:"w-full md:w-auto",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"تقديم اعتراض"]})})]}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(w,{className:"h-5 w-5 text-purple-600"}),"سحب الموافقة"]}),e.jsx(h,{children:"اسحب موافقتك على معالجة بياناتك (قد يؤثر على الخدمات)"})]}),e.jsx(n,{children:e.jsxs(s,{onClick:()=>m("withdraw"),variant:"outline",className:"w-full md:w-auto",disabled:!t?.hasConsent||v.isPending,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"سحب الموافقة"]})})]})]}),e.jsx(r,{className:"mt-6 bg-blue-50 border-blue-200",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold",children:"معلومات مهمة:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mr-4",children:[e.jsx("li",{children:"سنرد على طلبك خلال 30 يوم عمل"}),e.jsx("li",{children:"قد نطلب منك تأكيد هويتك قبل تنفيذ الطلب"}),e.jsx("li",{children:"بعض الطلبات قد تؤثر على قدرتك على استخدام الخدمة"}),e.jsxs("li",{children:["للاستفسارات:"," ",e.jsx("a",{href:"mailto:dpo@rabit.sa",className:"text-blue-700 hover:underline",children:"dpo@rabit.sa"})]})]})]})]})})})]})})}export{ee as default};
