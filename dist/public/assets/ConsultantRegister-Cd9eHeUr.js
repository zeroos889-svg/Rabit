import{r as j,j as e}from"./ui-vendor-C96WIwkg.js";import{B as Y}from"./BackButton-rFUz39lD.js";import{m as Z,t as z,b as d,C as N,L as v,B as y,I as u}from"./index-Bkz6h1fQ.js";import{L as i}from"./label-CmhXhWbA.js";import{T as K}from"./textarea-CDZ7LSXO.js";import{C as f}from"./checkbox-CzTf8sql.js";import{B as o}from"./badge-DdDRUR73.js";import{S as b}from"./switch-B5HFmlbk.js";import{S as Q,a as ee,b as se,c as re,d as L}from"./select-B0y6YODy.js";import{C as D}from"./circle-check-DlUG-57U.js";import{U as ae}from"./upload-B2zF0UdV.js";import"./react-vendor-DDxydHEc.js";import"./arrow-right-yQLf5R-N.js";import"./house-CS3RhUwS.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";const S=10,F=5,A=120,ie=["application/pdf","image/png","image/jpeg","image/jpg"],te=[{day:"الأحد",slot:"09:00 - 13:00 / 17:00 - 20:00",active:!0},{day:"الاثنين",slot:"09:00 - 13:00 / 17:00 - 20:00",active:!0},{day:"الثلاثاء",slot:"09:00 - 13:00 / 17:00 - 20:00",active:!0},{day:"الأربعاء",slot:"09:00 - 13:00",active:!0},{day:"الخميس",slot:"09:00 - 13:00",active:!1},{day:"الجمعة",slot:"إجازة",active:!1},{day:"السبت",slot:"إجازة",active:!1}];function be(){const[r,p]=j.useState({fullName:"",email:"",phone:"",specialization:"",yearsOfExperience:"",bio:"",certificates:null}),[l,O]=j.useState({instantAdvice:!0,session30:!0,policyReview:!1,workshop:!1,hourlyRate:"450",currency:"SAR"}),[m,I]=j.useState({responseHours:"8",deliveryHours:"48",refundWindowHours:"24"}),[n,M]=j.useState({chat:!0,voice:!0,inPerson:!1}),[E,T]=j.useState(te),[h,C]=j.useState({terms:!1,privacy:!1,cookies:!1}),[q,U]=j.useState(!1),{isAuthenticated:_,loading:W}=Z({redirectOnUnauthenticated:!0,redirectPath:"/login"}),H=z.consultant.register.useMutation({onSuccess:()=>{U(!0),d.success("تم إرسال طلب التسجيل بنجاح! سنتواصل معك قريباً.")},onError:s=>{const a=s?.message||"حدث خطأ أثناء التسجيل. يرجى المحاولة مرة أخرى.";d.error(a)}}),P=z.consultant.uploadDocument.useMutation({onError:s=>{const a=s?.message||"تعذر رفع المستند. يمكنك إعادة المحاولة لاحقاً.";d.error(a)}}),R=H.isPending||P.isPending,G=s=>{if(!s.target.files)return;const a=Array.from(s.target.files);if(a.length>S){d.error(`الحد الأقصى ${S} ملفات لكل طلب`);return}if(a.find(c=>!ie.includes(c.type))){d.error("الملفات المسموحة: PDF, PNG, JPG فقط");return}if(a.find(c=>c.size/(1024*1024)>F)){d.error(`حجم كل ملف يجب ألا يتجاوز ${F}MB`);return}p({...r,certificates:a})},B=r.fullName&&r.email&&r.phone&&r.specialization&&r.yearsOfExperience&&r.bio&&r.bio.length>=A&&h.terms&&h.privacy&&h.cookies,V=s=>new Promise((a,t)=>{const x=new FileReader;x.onload=()=>{typeof x.result=="string"?a(x.result):t(new Error("تعذر قراءة الملف"))},x.onerror=()=>t(new Error("تعذر قراءة الملف")),x.readAsDataURL(s)}),$=s=>{T(a=>a.map(t=>t.day===s?{...t,active:!t.active}:t))},g=(s,a)=>{O(t=>({...t,[s]:a}))},k=(s,a)=>{I(t=>({...t,[s]:a}))},w=s=>{M(a=>({...a,[s]:!a[s]}))},J=async s=>{if(s.preventDefault(),!B){d.error("يرجى ملء جميع الحقول والموافقة على الإقرارات");return}if(!_){d.error("يرجى تسجيل الدخول أولاً لإكمال التسجيل كمستشار");return}try{const a=Number(r.yearsOfExperience)||0,t=r.certificates?.map(x=>x.name)??[];await H.mutateAsync({fullNameAr:r.fullName,fullNameEn:r.fullName,email:r.email,phone:r.phone,mainSpecialization:r.specialization,subSpecializations:[],yearsOfExperience:a,bioAr:r.bio,bioEn:r.bio,certifications:t,services:l,availability:E,sla:m,channels:n}),r.certificates?.length&&(await Promise.all(r.certificates.map(async c=>{const X=await V(c);return P.mutateAsync({documentType:"certificate",documentName:c.name,documentUrl:X,fileSize:c.size,mimeType:c.type})}))).some(c=>!c?.success)&&d.error("تم التسجيل، لكن تعذر رفع بعض المستندات")}catch{d.error("حدث خطأ أثناء التسجيل. يرجى المحاولة مرة أخرى.")}};return W?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"جار التحقق من تسجيل الدخول..."})}):q?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(N,{className:"max-w-2xl w-full p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"h-20 w-20 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(D,{className:"h-12 w-12 text-green-600"})})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"تم إرسال طلبك بنجاح!"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"شكراً لك على التسجيل كمستشار في منصة رابِط. سيقوم فريقنا بمراجعة طلبك والتواصل معك خلال 2-3 أيام عمل."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-muted-foreground",children:["ستتلقى رسالة تأكيد على بريدك الإلكتروني:"," ",e.jsx("strong",{children:r.email})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(v,{href:"/",children:e.jsx(y,{variant:"outline",children:"العودة للصفحة الرئيسية"})}),e.jsx(v,{href:"/consulting",children:e.jsx(y,{className:"gradient-primary text-white",children:"تصفح الاستشارات"})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container py-12",children:[e.jsx(Y,{}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"التسجيل كمستشار"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"انضم إلى فريق المستشارين المحترفين في منصة رابِط وشارك خبرتك مع الآلاف من الشركات والأفراد"})]}),e.jsx(N,{className:"p-8",children:e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"المعلومات الشخصية"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"fullName",children:"الاسم الكامل *"}),e.jsx(u,{id:"fullName",value:r.fullName,onChange:s=>p({...r,fullName:s.target.value}),placeholder:"أدخل اسمك الكامل",required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"البريد الإلكتروني *"}),e.jsx(u,{id:"email",type:"email",value:r.email,onChange:s=>p({...r,email:s.target.value}),placeholder:"example@email.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"رقم الجوال *"}),e.jsx(u,{id:"phone",type:"tel",value:r.phone,onChange:s=>p({...r,phone:s.target.value}),placeholder:"05xxxxxxxx",required:!0})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"المعلومات المهنية"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"specialization",children:"التخصص *"}),e.jsx(u,{id:"specialization",value:r.specialization,onChange:s=>p({...r,specialization:s.target.value}),placeholder:"مثال: استشارات قانونية، تطوير الموارد البشرية",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"yearsOfExperience",children:"سنوات الخبرة *"}),e.jsx(u,{id:"yearsOfExperience",type:"number",min:"1",value:r.yearsOfExperience,onChange:s=>p({...r,yearsOfExperience:s.target.value}),placeholder:"عدد سنوات الخبرة",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"bio",children:"نبذة عنك وخبراتك *"}),e.jsx(K,{id:"bio",value:r.bio,onChange:s=>p({...r,bio:s.target.value}),placeholder:"اكتب نبذة مختصرة عن خبراتك ومؤهلاتك (لا تقل عن 100 كلمة)",rows:6,required:!0}),e.jsxs("p",{className:`text-sm mt-1 ${r.bio.length>=A?"text-muted-foreground":"text-amber-600"}`,children:[r.bio.length," / ",A," حرف مطلوبة لضمان قبول الملف"]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"حزم الخدمات والتسعير"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[e.jsx(f,{id:"instantAdvice",checked:l.instantAdvice,onCheckedChange:s=>g("instantAdvice",!!s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"استشارة فورية (دردشة/مكالمة)"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رد خلال ",m.responseHours," ساعة مع ملخص مكتوب."]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[e.jsx(f,{id:"session30",checked:l.session30,onCheckedChange:s=>g("session30",!!s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"جلسة 30 دقيقة مجدولة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مع أجندة مسبقة وتسجيل نقاط الإجراء."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[e.jsx(f,{id:"policyReview",checked:l.policyReview,onCheckedChange:s=>g("policyReview",!!s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"مراجعة سياسات/عقود"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["تسليم خلال ",m.deliveryHours," ساعة مع ملاحظات قانونية."]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[e.jsx(f,{id:"workshop",checked:l.workshop,onCheckedChange:s=>g("workshop",!!s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"ورشة أو تدريب داخلي"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يشمل مواد PDF وشهادة حضور."})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-[1fr_auto] gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"hourlyRate",children:"سعر الساعة"}),e.jsx(u,{id:"hourlyRate",type:"number",min:"150",value:l.hourlyRate,onChange:s=>g("hourlyRate",s.target.value),placeholder:"مثال: 450"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"يشمل التحضير، الملخص، والمتابعة بعد الجلسة."})]}),e.jsxs("div",{children:[e.jsx(i,{children:"العملة"}),e.jsxs(Q,{value:l.currency,onValueChange:s=>g("currency",s),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"اختر العملة"})}),e.jsxs(re,{children:[e.jsx(L,{value:"SAR",children:"ريال (SAR)"}),e.jsx(L,{value:"USD",children:"دولار (USD)"})]})]})]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"التوفر والحجز"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:E.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.day}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.slot})]}),e.jsx(b,{checked:s.active,onCheckedChange:()=>$(s.day),"aria-label":`تفعيل الحجز في ${s.day}`})]},s.day))}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"يتم منع التداخل مع المواعيد المؤكدة تلقائياً وإغلاق المواعيد بعد الحجز."})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"معايير الجودة و SLA"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"responseHours",children:"الرد الأول خلال (ساعات)"}),e.jsx(u,{id:"responseHours",type:"number",min:"1",value:m.responseHours,onChange:s=>k("responseHours",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"deliveryHours",children:"تسليم الملاحظات خلال (ساعات)"}),e.jsx(u,{id:"deliveryHours",type:"number",min:"12",value:m.deliveryHours,onChange:s=>k("deliveryHours",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"refundWindowHours",children:"نافذة استرجاع في حال التأخر (ساعات)"}),e.jsx(u,{id:"refundWindowHours",type:"number",min:"12",value:m.refundWindowHours,onChange:s=>k("refundWindowHours",s.target.value)})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(o,{variant:n.chat?"default":"outline",children:"دردشة فورية"}),e.jsx(o,{variant:n.voice?"default":"outline",children:"مكالمة صوتية/فيديو"}),e.jsx(o,{variant:n.inPerson?"default":"outline",children:"حضورياً"})]}),e.jsxs("div",{className:"flex gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{id:"channel-chat",checked:n.chat,onCheckedChange:()=>w("chat")}),e.jsx(i,{htmlFor:"channel-chat",children:"دعم الدردشة"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{id:"channel-voice",checked:n.voice,onCheckedChange:()=>w("voice")}),e.jsx(i,{htmlFor:"channel-voice",children:"مكالمة صوتية/فيديو"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{id:"channel-inperson",checked:n.inPerson,onCheckedChange:()=>w("inPerson")}),e.jsx(i,{htmlFor:"channel-inperson",children:"جلسة حضورية"})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ملخص العرض للمراجعة السريعة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(N,{className:"p-4 space-y-2",children:[e.jsx("p",{className:"font-semibold",children:"الحزم المفعّلة"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.instantAdvice&&e.jsx(o,{children:"استشارة فورية"}),l.session30&&e.jsx(o,{children:"جلسة 30 دقيقة"}),l.policyReview&&e.jsx(o,{children:"مراجعة سياسات"}),l.workshop&&e.jsx(o,{children:"ورشة/تدريب"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["سعر الساعة: ",l.hourlyRate," ",l.currency]})]}),e.jsxs(N,{className:"p-4 space-y-2",children:[e.jsx("p",{className:"font-semibold",children:"SLA وقنوات الاتصال"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رد أول خلال ",m.responseHours," ساعة، تسليم خلال ",m.deliveryHours," ساعة، استرجاع عند التأخر أكثر من ",m.refundWindowHours," ساعة."]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.chat&&e.jsx(o,{variant:"outline",children:"دردشة"}),n.voice&&e.jsx(o,{variant:"outline",children:"صوت/فيديو"}),n.inPerson&&e.jsx(o,{variant:"outline",children:"حضوري"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"الشهادات والمستندات"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"certificates",children:"رفع الشهادات والمستندات (اختياري)"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("label",{htmlFor:"certificates",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(ae,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:"اضغط لرفع الملفات"})," ","أو اسحب وأفلت"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["PDF, PNG, JPG (حد أقصى ",S," ملفات، ",F,"MB لكل ملف)"]})]}),e.jsx("input",{id:"certificates",type:"file",className:"hidden",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:G})]}),r.certificates&&r.certificates.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"الملفات المرفوعة:"}),e.jsx("ul",{className:"space-y-1",children:r.certificates.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-green-600"}),s.name]},a))})]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"الإقرارات *"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{id:"terms",checked:h.terms,onCheckedChange:s=>C({...h,terms:s}),required:!0}),e.jsxs("label",{htmlFor:"terms",className:"text-sm leading-relaxed cursor-pointer",children:["أوافق على"," ",e.jsx(v,{href:"/terms",className:"text-primary hover:underline",children:"الشروط والأحكام"})," ","الخاصة بمنصة رابِط"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{id:"privacy",checked:h.privacy,onCheckedChange:s=>C({...h,privacy:s}),required:!0}),e.jsxs("label",{htmlFor:"privacy",className:"text-sm leading-relaxed cursor-pointer",children:["أوافق على"," ",e.jsx(v,{href:"/privacy",className:"text-primary hover:underline",children:"سياسة الخصوصية"})," ","وأفهم كيفية استخدام بياناتي"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{id:"cookies",checked:h.cookies,onCheckedChange:s=>C({...h,cookies:s}),required:!0}),e.jsxs("label",{htmlFor:"cookies",className:"text-sm leading-relaxed cursor-pointer",children:["أوافق على"," ",e.jsx(v,{href:"/cookies-policy",className:"text-primary hover:underline",children:"سياسة الكوكيز"})," ","واستخدام ملفات تعريف الارتباط"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx(y,{type:"submit",className:"flex-1 gradient-primary text-white",disabled:!B||R,children:R?"جاري الإرسال...":"إرسال طلب التسجيل"}),e.jsx(v,{href:"/",children:e.jsx(y,{type:"button",variant:"outline",children:"إلغاء"})})]})]})})]})]})})}export{be as default};
