{"version":3,"file":"ForgotPassword-CvFopW72.js","sources":["../../../client/src/pages/ForgotPassword.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { BackButton } from \"@/components/BackButton\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Mail, ArrowRight, Loader2, CheckCircle2 } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { toast } from \"sonner\";\nimport { trpc } from \"@/lib/trpc\";\n\nexport default function ForgotPassword() {\n  const [email, setEmail] = useState(\"\");\n  const [emailSent, setEmailSent] = useState(false);\n  const resetMutation = trpc.auth.requestPasswordReset.useMutation({\n    onSuccess: () => {\n      setEmailSent(true);\n      toast.success(\"تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني\");\n    },\n    onError: error => {\n      toast.error(error.message || \"تعذر إرسال رابط إعادة التعيين\");\n    },\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!email || !email.includes(\"@\")) {\n      toast.error(\"الرجاء إدخال بريد إلكتروني صحيح\");\n      return;\n    }\n\n    await resetMutation.mutateAsync({ email });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-primary/5 via-primary/10 to-primary/5 flex items-center justify-center p-4\">\n      <BackButton />\n\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4\">\n            <Mail className=\"w-8 h-8 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl\">استرجاع كلمة المرور</CardTitle>\n          <CardDescription>\n            {emailSent\n              ? \"تم إرسال رابط إعادة التعيين\"\n              : \"أدخل بريدك الإلكتروني لإرسال رابط إعادة تعيين كلمة المرور\"}\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent>\n          {emailSent ? (\n            <div className=\"text-center space-y-6\">\n              <div className=\"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center\">\n                <CheckCircle2 className=\"w-12 h-12 text-green-600\" />\n              </div>\n\n              <div className=\"space-y-2\">\n                <p className=\"text-muted-foreground\">\n                  تم إرسال رابط إعادة تعيين كلمة المرور إلى\n                </p>\n                <p className=\"font-semibold text-primary\">{email}</p>\n              </div>\n\n              <div className=\"bg-muted/50 p-4 rounded-lg text-sm space-y-2\">\n                <p className=\"font-medium\">ملاحظات مهمة:</p>\n                <ul className=\"text-muted-foreground space-y-1 text-right\">\n                  <li>• تحقق من صندوق البريد الوارد</li>\n                  <li>• قد تجد الرسالة في البريد المزعج</li>\n                  <li>• الرابط صالح لمدة 24 ساعة</li>\n                  <li>• يمكنك طلب رابط جديد إذا انتهت صلاحيته</li>\n                </ul>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Button\n                  onClick={() => setEmailSent(false)}\n                  variant=\"outline\"\n                  className=\"w-full\"\n                >\n                  إرسال مرة أخرى\n                </Button>\n\n                <Link href=\"/login\">\n                  <Button variant=\"default\" className=\"w-full group\">\n                    العودة لتسجيل الدخول\n                    <ArrowRight className=\"mr-2 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">البريد الإلكتروني</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"أدخل بريدك الإلكتروني\"\n                    className=\"pr-10\"\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"bg-muted/50 p-4 rounded-lg text-sm text-muted-foreground\">\n                <p>\n                  سنرسل لك رسالة تحتوي على رابط لإعادة تعيين كلمة المرور. الرجاء\n                  التأكد من البريد الإلكتروني المدخل.\n                </p>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                size=\"lg\"\n                disabled={resetMutation.isPending || !email}\n              >\n                {resetMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"ml-2 h-4 w-4 animate-spin\" />\n                    جاري الإرسال...\n                  </>\n                ) : (\n                  <>\n                    إرسال رابط الاسترجاع\n                    <ArrowRight className=\"mr-2 h-4 w-4\" />\n                  </>\n                )}\n              </Button>\n\n              <div className=\"text-center space-y-2\">\n                <Link href=\"/login\">\n                  <Button variant=\"ghost\" className=\"text-sm\">\n                    تذكرت كلمة المرور؟ تسجيل الدخول\n                  </Button>\n                </Link>\n\n                <div className=\"text-sm text-muted-foreground\">\n                  ليس لديك حساب؟{\" \"}\n                  <Link href=\"/signup\" className=\"text-primary hover:underline\">\n                    سجل الآن\n                  </Link>\n                </div>\n              </div>\n            </form>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Trust Indicators */}\n      <div className=\"fixed bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-4 text-xs text-muted-foreground bg-background/80 backdrop-blur-sm px-4 py-2 rounded-full border\">\n        <div className=\"flex items-center gap-1\">\n          <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\n          <span>آمن 100%</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\n          <span>مشفر</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\n          <span>محمي</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ForgotPassword","email","setEmail","useState","emailSent","setEmailSent","resetMutation","trpc","toast","error","handleSubmit","e","jsxs","jsx","BackButton","Card","CardHeader","Mail","CardTitle","CardDescription","CardContent","CheckCircle2","Button","Link","ArrowRight","Label","Input","Fragment","Loader2"],"mappings":"+fAiBA,SAAwBA,GAAiB,CACvC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1CG,EAAgBC,EAAK,KAAK,qBAAqB,YAAY,CAC/D,UAAW,IAAM,CACfF,EAAa,EAAI,EACjBG,EAAM,QAAQ,4DAA4D,CAC5E,EACA,QAASC,GAAS,CAChBD,EAAM,MAAMC,EAAM,SAAW,+BAA+B,CAC9D,CAAA,CACD,EAEKC,EAAe,MAAOC,GAAuB,CAGjD,GAFAA,EAAE,eAAA,EAEE,CAACV,GAAS,CAACA,EAAM,SAAS,GAAG,EAAG,CAClCO,EAAM,MAAM,iCAAiC,EAC7C,MACF,CAEA,MAAMF,EAAc,YAAY,CAAE,MAAAL,EAAO,CAC3C,EAEA,OACEW,EAAAA,KAAC,MAAA,CAAI,UAAU,iHACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAW,EAEZF,EAAAA,KAACG,EAAA,CAAK,UAAU,kBACd,SAAA,CAAAH,EAAAA,KAACI,EAAA,CAAW,UAAU,cACpB,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,qFACb,eAACI,EAAA,CAAK,UAAU,uBAAuB,CAAA,CACzC,EACAJ,EAAAA,IAACK,EAAA,CAAU,UAAU,WAAW,SAAA,sBAAmB,EACnDL,EAAAA,IAACM,EAAA,CACE,SAAAf,EACG,8BACA,2DAAA,CACN,CAAA,EACF,QAECgB,EAAA,CACE,SAAAhB,EACCQ,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+EACb,eAACQ,EAAA,CAAa,UAAU,2BAA2B,CAAA,CACrD,EAEAT,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,4CAErC,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,SAAAZ,CAAA,CAAM,CAAA,EACnD,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAc,SAAA,gBAAa,EACxCD,EAAAA,KAAC,KAAA,CAAG,UAAU,6CACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,+BAAA,CAA6B,EACjCA,EAAAA,IAAC,MAAG,SAAA,mCAAA,CAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,4BAAA,CAA0B,EAC9BA,EAAAA,IAAC,MAAG,SAAA,yCAAA,CAAuC,CAAA,CAAA,CAC7C,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACS,EAAA,CACC,QAAS,IAAMjB,EAAa,EAAK,EACjC,QAAQ,UACR,UAAU,SACX,SAAA,gBAAA,CAAA,EAIDQ,EAAAA,IAACU,GAAK,KAAK,SACT,gBAACD,EAAA,CAAO,QAAQ,UAAU,UAAU,eAAe,SAAA,CAAA,uBAEjDT,EAAAA,IAACW,EAAA,CAAW,UAAU,6DAAA,CAA8D,CAAA,CAAA,CACtF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAZ,EAAAA,KAAC,OAAA,CAAK,SAAUF,EAAc,UAAU,YACtC,SAAA,CAAAE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACY,EAAA,CAAM,QAAQ,QAAQ,SAAA,oBAAiB,EACxCb,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACI,EAAA,CAAK,UAAU,yEAAA,CAA0E,EAC1FJ,EAAAA,IAACa,EAAA,CACC,GAAG,QACH,KAAK,QACL,YAAY,wBACZ,UAAU,QACV,MAAOzB,EACP,SAAUU,GAAKT,EAASS,EAAE,OAAO,KAAK,EACtC,SAAQ,EAAA,CAAA,CACV,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,2DACb,SAAAE,MAAC,IAAA,CAAE,8GAGH,CAAA,CACF,EAEAA,EAAAA,IAACS,EAAA,CACC,KAAK,SACL,UAAU,SACV,KAAK,KACL,SAAUhB,EAAc,WAAa,CAACL,EAErC,SAAAK,EAAc,UACbM,EAAAA,KAAAe,EAAAA,SAAA,CACE,SAAA,CAAAd,EAAAA,IAACe,EAAA,CAAQ,UAAU,2BAAA,CAA4B,EAAE,iBAAA,CAAA,CAEnD,EAEAhB,EAAAA,KAAAe,EAAAA,SAAA,CAAE,SAAA,CAAA,uBAEAd,EAAAA,IAACW,EAAA,CAAW,UAAU,cAAA,CAAe,CAAA,CAAA,CACvC,CAAA,CAAA,EAIJZ,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAACU,EAAA,CAAK,KAAK,SACT,SAAAV,EAAAA,IAACS,EAAA,CAAO,QAAQ,QAAQ,UAAU,UAAU,SAAA,iCAAA,CAE5C,EACF,EAEAV,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,CAAA,iBAC9B,UACdW,EAAA,CAAK,KAAK,UAAU,UAAU,+BAA+B,SAAA,UAAA,CAE9D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,EAGAX,EAAAA,KAAC,MAAA,CAAI,UAAU,iKACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACQ,EAAA,CAAa,UAAU,wBAAA,CAAyB,EACjDR,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,EAChB,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACQ,EAAA,CAAa,UAAU,wBAAA,CAAyB,EACjDR,EAAAA,IAAC,QAAK,SAAA,MAAA,CAAI,CAAA,EACZ,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACQ,EAAA,CAAa,UAAU,wBAAA,CAAyB,EACjDR,EAAAA,IAAC,QAAK,SAAA,MAAA,CAAI,CAAA,CAAA,CACZ,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}