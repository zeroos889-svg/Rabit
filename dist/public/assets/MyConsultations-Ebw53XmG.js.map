{"version":3,"file":"MyConsultations-Ebw53XmG.js","sources":["../../../client/src/pages/MyConsultations.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { trpc } from \"@/lib/trpc\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar, Clock, MessageCircle, RefreshCw } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nconst statusLabels: Record<string, string> = {\n  open: \"مفتوحة\",\n  pending: \"قيد الانتظار\",\n  confirmed: \"مؤكدة\",\n  \"in-progress\": \"قيد التنفيذ\",\n  completed: \"مكتملة\",\n  cancelled: \"ملغاة\",\n};\n\nconst statusVariants: Record<string, \"default\" | \"secondary\" | \"outline\" | \"destructive\"> = {\n  open: \"secondary\",\n  pending: \"outline\",\n  confirmed: \"secondary\",\n  \"in-progress\": \"default\",\n  completed: \"default\",\n  cancelled: \"destructive\",\n};\n\nexport default function MyConsultations() {\n  const [, navigate] = useLocation();\n  const { data, isLoading, refetch, isFetching } =\n    trpc.consultant.getMyBookings.useQuery();\n\n  const bookings = useMemo(() => data?.bookings ?? [], [data]);\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold mb-1\">استشاراتي</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            جميع جلساتك المحجوزة مع المستشارين.\n          </p>\n        </div>\n        <Button variant=\"outline\" onClick={() => refetch()} disabled={isFetching}>\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          تحديث\n        </Button>\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {[1, 2, 3].map(i => (\n            <Skeleton key={i} className=\"h-32 w-full\" />\n          ))}\n        </div>\n      ) : bookings.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-8 text-center text-muted-foreground\">\n            لا توجد استشارات بعد. احجز استشارة جديدة من صفحة الاستشارات.\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {bookings.map(booking => (\n            <Card key={booking.id}>\n              <CardHeader className=\"flex flex-row items-start justify-between\">\n                <div>\n                  <CardTitle className=\"text-lg\">\n                    {booking.subject || booking.consultationType?.nameAr || \"استشارة\"}\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {booking.consultant?.fullNameAr || \"سيتم التعيين لاحقاً\"}\n                  </p>\n                </div>\n                <Badge variant={statusVariants[booking.status || \"pending\"] || \"secondary\"}>\n                  {statusLabels[booking.status || \"pending\"]}\n                </Badge>\n              </CardHeader>\n              <CardContent className=\"space-y-3 text-sm\">\n                <div className=\"flex items-center gap-2 text-muted-foreground\">\n                  <Calendar className=\"h-4 w-4\" />\n                  <span>\n                    {booking.scheduledDate\n                      ? new Date(booking.scheduledDate).toLocaleDateString(\"ar-SA\")\n                      : \"لم يحدد\"}\n                  </span>\n                  <Clock className=\"h-4 w-4 ml-3\" />\n                  <span>{booking.scheduledTime || \"—\"}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-xs text-muted-foreground\">\n                    SLA: {booking.slaHours || booking.consultationType?.slaHours || 24} ساعة\n                  </div>\n                  <div className=\"font-semibold text-primary\">\n                    {(booking.price || booking.consultationType?.price || 0).toLocaleString()} ريال\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    asChild\n                  >\n                    <Link href={`/consultation/${booking.id}`}>التفاصيل</Link>\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => navigate(`/consultation/${booking.id}/chat`)}\n                  >\n                    <MessageCircle className=\"h-4 w-4 mr-1\" />\n                    المحادثة\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["statusLabels","statusVariants","MyConsultations","navigate","useLocation","data","isLoading","refetch","isFetching","trpc","bookings","useMemo","jsxs","jsx","Button","RefreshCw","Skeleton","i","Card","CardContent","booking","CardHeader","CardTitle","Badge","Calendar","Clock","Link","MessageCircle"],"mappings":"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"}