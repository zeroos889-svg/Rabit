import{r as x,j as e}from"./ui-vendor-C96WIwkg.js";import{D as A}from"./DashboardLayout-BL5EQdI4.js";import{u as I,t as b,L as N,B as h,C as n,c,d as o,f as d,j as M,q as R,o as v,e as C,I as P,S as $}from"./index-Bkz6h1fQ.js";import{B as E}from"./badge-DdDRUR73.js";import{S as u}from"./skeleton-CH6Aula-.js";import{P as H}from"./plus-0j2KamQO.js";import{B as Q}from"./briefcase-B7DqEMtf.js";import{C as U}from"./circle-check-DlUG-57U.js";import{D as W}from"./dollar-sign-BRdvXPnQ.js";import{W as q}from"./wand-sparkles-Cg7JuEBy.js";import{E as z}from"./eye-D29FSyEF.js";import{C as G}from"./clock-BFXiIUou.js";import"./react-vendor-DDxydHEc.js";import"./chart-column-D_-lOMZP.js";import"./shield-check-CohldUcE.js";import"./bell-BqXFjnTJ.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";function de(){const{t:Y,i18n:S}=I(),t=S.language==="ar",{data:g,isLoading:r}=b.consultant.getConsultantBookings.useQuery(),{data:k}=b.consultant.getMyProfile.useQuery(),i=x.useMemo(()=>g?.bookings||[],[g]),p=x.useMemo(()=>{const s=i.filter(a=>a.status!=="completed"&&a.status!=="cancelled"),m=i.filter(a=>a.status==="completed"),T=m.reduce((a,y)=>a+(y.price||y.consultationType?.price||0),0);return{activeCount:s.length,completedCount:m.length,revenue:T,totalClients:new Set(i.map(a=>a.clientId||a.userId)).size}},[i]),L=[{title:"حاسبة نهاية الخدمة",titleEn:"End of Service Calculator",description:"احسب مكافأة نهاية الخدمة حسب المادة 84",descriptionEn:"Calculate end of service benefits per Article 84",icon:R,href:"/tools/end-of-service",color:"from-blue-600 to-cyan-600",count:15},{title:"حاسبة الإجازات",titleEn:"Leave Calculator",description:"احسب رصيد الإجازات المختلفة",descriptionEn:"Calculate various leave balances",icon:v,href:"/tools/leave-calculator",color:"from-green-600 to-emerald-600",count:18},{title:"مولد الخطابات",titleEn:"Letter Generator",description:"ولّد خطابات احترافية بالذكاء الاصطناعي",descriptionEn:"Generate professional letters with AI",icon:q,href:"/tools/letter-generator",color:"from-purple-600 to-pink-600",count:12}],[j,D]=x.useState(""),[w,B]=x.useState(5),f=x.useMemo(()=>i.filter(s=>(s.consultationType?.nameAr||s.consultationType?.nameEn||"").toLowerCase().includes(j.toLowerCase())).slice(0,w),[i,j,w]),l={plan:"مستقل HR",planEn:"HR Consultant",status:"نشط",statusEn:"Active",price:299,nextBilling:"2024-12-20",daysLeft:30};return e.jsx(A,{userType:"consultant",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:t?"لوحة التحكم":"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?`مرحباً ${k?.consultant?.fullNameAr||""}`:"Welcome to Rabit platform for consultants"})]}),e.jsx(N,{href:"/tools",children:e.jsxs(h,{className:"bg-gradient-to-r from-purple-600 to-pink-600",children:[e.jsx(H,{className:"w-4 h-4 ml-2"}),t?"استخدم أداة":"Use Tool"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-gray-600",children:t?"استشارات نشطة":"Active Consultations"}),e.jsx(Q,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(d,{children:r?e.jsx(u,{className:"h-8 w-16"}):e.jsx("div",{className:"text-2xl font-bold",children:p.activeCount})})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-gray-600",children:t?"استشارات مكتملة":"Completed"}),e.jsx(U,{className:"h-4 w-4 text-green-600"})]}),e.jsx(d,{children:r?e.jsx(u,{className:"h-8 w-16"}):e.jsx("div",{className:"text-2xl font-bold",children:p.completedCount})})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-gray-600",children:t?"العملاء":"Clients"}),e.jsx(M,{className:"h-4 w-4 text-green-600"})]}),e.jsx(d,{children:r?e.jsx(u,{className:"h-8 w-16"}):e.jsx("div",{className:"text-2xl font-bold",children:p.totalClients})})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-gray-600",children:t?"الإيرادات":"Revenue"}),e.jsx(W,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(d,{children:r?e.jsx(u,{className:"h-8 w-24"}):e.jsxs("div",{className:"text-2xl font-bold",children:[p.revenue," ﷼"]})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"الأدوات السريعة":"Quick Tools"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:L.map(s=>{const m=s.icon;return e.jsx(N,{href:s.href,children:e.jsxs(n,{className:"hover:shadow-lg transition-shadow cursor-pointer h-full",children:[e.jsxs(c,{children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br ${s.color} rounded-xl mb-3`,children:e.jsx(m,{className:"w-6 h-6 text-white"})}),e.jsxs(o,{className:"flex items-center justify-between",children:[t?s.title:s.titleEn,e.jsx(E,{variant:"secondary",children:s.count})]}),e.jsx(C,{children:t?s.description:s.descriptionEn})]}),e.jsx(d,{children:e.jsx(h,{variant:"outline",className:"w-full",children:t?"استخدم الآن":"Use Now"})})]})},s.href)})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(n,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:t?"النشاط الأخير":"Recent Activity"}),e.jsx(C,{children:t?"آخر الحجوزات وتحديثاتها":"Latest bookings and updates"})]}),e.jsx(P,{placeholder:t?"ابحث في الحجوزات...":"Search bookings...",value:j,onChange:s=>D(s.target.value),className:"max-w-xs"})]})}),e.jsx(d,{children:r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(u,{className:"h-16 w-full"},s))}):e.jsxs("div",{className:"space-y-4",children:[f.map(s=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("div",{className:"text-purple-600",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.consultationType?.nameAr||"استشارة"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.scheduledDate?new Date(s.scheduledDate).toLocaleDateString("ar-SA"):"—"," ",s.scheduledTime||""]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["الحالة: ",s.status]})]}),e.jsx(h,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(N,{href:`/consultation/${s.id}/chat`,children:e.jsx(z,{className:"w-4 h-4"})})})]},s.id)),!r&&f.length<i.length&&e.jsx(h,{variant:"outline",className:"w-full",onClick:()=>B(s=>s+5),children:t?"عرض المزيد":"Show more"}),!r&&!f.length&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"لا توجد حجوزات":"No bookings found"})]})})]}),e.jsxs(n,{className:"bg-gradient-to-br from-purple-600 to-pink-600 text-white",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-white",children:t?"اشتراكك":"Your Subscription"}),e.jsx($,{className:"w-5 h-5"})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:t?"الباقة":"Plan"}),e.jsx("p",{className:"text-2xl font-bold",children:t?l.plan:l.planEn})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-white/20",children:[e.jsx("span",{className:"text-sm opacity-90",children:t?"الحالة":"Status"}),e.jsx(E,{className:"bg-white text-purple-600",children:t?l.status:l.statusEn})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-white/20",children:[e.jsx("span",{className:"text-sm opacity-90",children:t?"السعر الشهري":"Monthly Price"}),e.jsxs("span",{className:"font-bold",children:[l.price," ﷼"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-white/20",children:[e.jsx("span",{className:"text-sm opacity-90",children:t?"التجديد القادم":"Next Billing"}),e.jsx("span",{className:"text-sm",children:l.nextBilling})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[l.daysLeft," ",t?"يوم متبقي":"days left"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${l.daysLeft/30*100}%`}})})]}),e.jsx(h,{className:"w-full bg-white text-purple-600 hover:bg-gray-100 mt-4",children:t?"إدارة الاشتراك":"Manage Subscription"})]})]})]})]})})}export{de as default};
