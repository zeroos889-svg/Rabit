import{j as s}from"./ui-vendor-C96WIwkg.js";import{G as v,a as b,t as y,C as n,f as l,B as i,c as o,d,L as w,H as C,o as k}from"./index-Bkz6h1fQ.js";import{B as A}from"./badge-DdDRUR73.js";import{S as h}from"./skeleton-CH6Aula-.js";import{A as L}from"./arrow-left-DgufH9cq.js";import{S}from"./shield-check-CohldUcE.js";import{C as T}from"./clock-BFXiIUou.js";import{T as D}from"./timer-BHRzRZcB.js";import"./react-vendor-DDxydHEc.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";const H={open:"مفتوحة",pending:"قيد الانتظار",confirmed:"مؤكدة","in-progress":"قيد التنفيذ",completed:"مكتملة",cancelled:"ملغاة"};function F(){const{id:u}=v(),[,m]=b(),a=Number(u),{data:x,isLoading:j}=y.consultant.getBooking.useQuery({bookingId:a},{enabled:!!a}),p=()=>{const t=x?.booking;if(!t?.createdAt)return null;const f=t.slaHours||t.consultationType?.slaHours||24,r=new Date(t.createdAt);r.setHours(r.getHours()+f);const c=r.getTime()-Date.now();if(c<=0)return"انتهى الوقت المستهدف";const g=Math.floor(c/(1e3*60*60)),N=Math.floor(c%(1e3*60*60)/(1e3*60));return`${g} ساعة ${N} دقيقة`};if(j)return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx(h,{className:"h-10 w-48"}),s.jsx(h,{className:"h-48 w-full"})]});const e=x?.booking;return e?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{variant:"ghost",size:"icon",onClick:()=>m("/my-consultations"),children:s.jsx(L,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["استشارة #",e.ticketNumber||a]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.subject||e.consultationType?.nameAr||"استشارة الموارد البشرية"})]})]}),s.jsx(A,{variant:"secondary",children:H[e.status||"pending"]||"قيد الانتظار"})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[s.jsxs(n,{className:"lg:col-span-2",children:[s.jsx(o,{children:s.jsx(d,{children:"ملخص الاستشارة"})}),s.jsxs(l,{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"المستشار"}),s.jsx("p",{className:"font-semibold",children:e.consultant?.fullNameAr||"سيتم التعيين لاحقاً"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"نوع الاستشارة"}),s.jsx("p",{className:"font-semibold",children:e.consultationType?.nameAr||"غير محدد"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"التاريخ"}),s.jsx("p",{className:"font-semibold",children:e.scheduledDate?new Date(e.scheduledDate).toLocaleDateString("ar-SA"):"لم يحدد"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"الوقت"}),s.jsx("p",{className:"font-semibold",children:e.scheduledTime||"—"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"SLA"}),s.jsxs("p",{className:"font-semibold",children:[e.slaHours||e.consultationType?.slaHours||24," ساعة"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"السعر"}),s.jsxs("p",{className:"font-semibold text-primary",children:[(e.price||e.consultationType?.price||0).toLocaleString()," ريال"]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground mb-1",children:"الوصف"}),s.jsx("p",{className:"text-sm leading-relaxed",children:e.description})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(n,{children:[s.jsx(o,{children:s.jsx(d,{children:"الإجراءات"})}),s.jsxs(l,{className:"space-y-2",children:[s.jsx(i,{className:"w-full",asChild:!0,children:s.jsxs(w,{href:`/consultation/${a}/chat`,children:[s.jsx(C,{className:"h-4 w-4 mr-2"}),"الانتقال للمحادثة"]})}),s.jsx(i,{variant:"outline",className:"w-full",onClick:()=>m("/consulting/book-new"),children:"حجز استشارة جديدة"})]})]}),s.jsxs(n,{children:[s.jsx(o,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5 text-green-600"}),"SLA"]})}),s.jsxs(l,{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["يتم الرد خلال"," ",s.jsxs("strong",{className:"text-primary",children:[e.slaHours||e.consultationType?.slaHours||24," ساعة"]})," ","من وقت الحجز."]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"h-4 w-4"}),s.jsxs("span",{children:["تاريخ الإنشاء: ",new Date(e.createdAt||new Date).toLocaleDateString("ar-SA")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T,{className:"h-4 w-4"}),s.jsxs("span",{children:["الوقت المتبقي: ",p()||"—"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{className:"h-4 w-4"}),s.jsx("span",{children:"الوقت المستهدف للإنجاز وفق SLA"})]})]})]})]})]})]}):s.jsx("div",{className:"p-6",children:s.jsx(n,{children:s.jsx(l,{className:"py-10 text-center text-muted-foreground",children:"الاستشارة غير موجودة."})})})}export{F as default};
