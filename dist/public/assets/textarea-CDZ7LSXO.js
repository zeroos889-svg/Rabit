import{r as c,j as f}from"./ui-vendor-C96WIwkg.js";import{W as C,n as g}from"./index-Bkz6h1fQ.js";function l(e){const r=c.useRef(e);r.current=e;const i=c.useRef(null);return i.current||(i.current=(function(...u){return r.current.apply(this,u)})),i.current}function x(e={}){const{onKeyDown:r,onCompositionStart:i,onCompositionEnd:u}=e,s=c.useRef(!1),n=c.useRef(null),a=c.useRef(null),m=l(t=>{n.current&&(clearTimeout(n.current),n.current=null),a.current&&(clearTimeout(a.current),a.current=null),s.current=!0,i?.(t)}),p=l(t=>{n.current=setTimeout(()=>{a.current=setTimeout(()=>{s.current=!1})}),u?.(t)}),o=l(t=>{if(s.current&&(t.key==="Escape"||t.key==="Enter"&&!t.shiftKey)){t.stopPropagation();return}r?.(t)}),d=l(()=>s.current);return{onCompositionStart:m,onCompositionEnd:p,onKeyDown:o,isComposing:d}}function b({className:e,onKeyDown:r,onCompositionStart:i,onCompositionEnd:u,...s}){const n=C(),{onCompositionStart:a,onCompositionEnd:m,onKeyDown:p}=x({onKeyDown:o=>{const d=o.nativeEvent.isComposing||n.justEndedComposing();o.key==="Enter"&&!o.shiftKey&&d||r?.(o)},onCompositionStart:o=>{n.setComposing(!0),i?.(o)},onCompositionEnd:o=>{n.markCompositionEnd(),setTimeout(()=>{n.setComposing(!1)},100),u?.(o)}});return f.jsx("textarea",{"data-slot":"textarea",className:g("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),onCompositionStart:a,onCompositionEnd:m,onKeyDown:p,...s})}export{b as T};
