{"version":3,"file":"Login-BAs3swX8.js","sources":["../../../client/src/pages/Login.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { BackButton } from \"@/components/BackButton\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Mail,\n  Lock,\n  Eye,\n  EyeOff,\n  Sparkles,\n  Chrome,\n  Github,\n  Linkedin,\n} from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { toast } from \"sonner\";\nimport { trpc } from \"@/lib/trpc\";\n\nexport default function Login() {\n  const { t } = useTranslation();\n  const [, setLocation] = useLocation();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const loginMutation = trpc.auth.login.useMutation({\n    onSuccess: (data: any) => {\n      toast.success(t(\"login.success\"));\n      // Save lightweight user profile (session relies on cookies)\n      if (data.user) {\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\n      }\n\n      // Redirect based on user type\n      setTimeout(() => {\n        switch (data.user.userType) {\n          case \"company\":\n            setLocation(\"/dashboard/company\");\n            break;\n          case \"consultant\":\n          case \"individual\":\n            setLocation(\"/dashboard/consultant\");\n            break;\n          case \"employee\":\n            setLocation(\"/dashboard/employee\");\n            break;\n          case \"admin\":\n            setLocation(\"/admin/dashboard\");\n            break;\n          default:\n            setLocation(\"/\");\n        }\n      }, 500);\n    },\n    onError: (error) => {\n      toast.error(error.message || t(\"login.error\"));\n      setIsLoading(false);\n    },\n    onSettled: () => setIsLoading(false),\n  });\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.email || !formData.password) {\n      toast.error(t(\"login.fillAllFields\"));\n      return;\n    }\n\n    setIsLoading(true);\n    loginMutation.mutate(formData);\n  };\n\n  const handleOAuthLogin = (provider: string) => {\n    // Placeholder until OAuth endpoints are wired\n    toast.info(`${t(\"login.oauth\")} ${provider} - ${t(\"login.comingSoon\", { defaultValue: \"قريباً\" })}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-blue-900/20 py-12 px-4 sm:px-6 lg:px-8\">\n      <BackButton />\n      \n      <div className=\"max-w-md mx-auto\">\n        {/* Logo & Title */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl mb-4 shadow-lg\">\n            <Sparkles className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n            {t(\"login.welcomeBack\")}\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n            {t(\"login.subtitle\")}\n          </p>\n        </div>\n\n        <Card className=\"shadow-xl\">\n          <CardHeader>\n            <CardTitle>{t(\"login.title\")}</CardTitle>\n            <CardDescription>{t(\"login.description\")}</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              {/* Email */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">{t(\"login.email\")}</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute right-3 top-3 h-4 w-4 text-gray-400\" />\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder={t(\"login.emailPlaceholder\")}\n                    className=\"pr-10\"\n                    value={formData.email}\n                    onChange={(e) =>\n                      setFormData({ ...formData, email: e.target.value })\n                    }\n                    disabled={isLoading}\n                    autoComplete=\"email\"\n                    dir=\"ltr\"\n                  />\n                </div>\n              </div>\n\n              {/* Password */}\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <Label htmlFor=\"password\">{t(\"login.password\")}</Label>\n                  <Link href=\"/forgot-password\">\n                    <a className=\"text-sm text-blue-600 hover:text-blue-700\">\n                      {t(\"login.forgotPassword\")}\n                    </a>\n                  </Link>\n                </div>\n                <div className=\"relative\">\n                  <Lock className=\"absolute right-3 top-3 h-4 w-4 text-gray-400\" />\n                  <Input\n                    id=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    placeholder={t(\"login.passwordPlaceholder\")}\n                    className=\"pr-10 pl-10\"\n                    value={formData.password}\n                    onChange={(e) =>\n                      setFormData({ ...formData, password: e.target.value })\n                    }\n                    disabled={isLoading}\n                    autoComplete=\"current-password\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute left-3 top-3 text-gray-400 hover:text-gray-600\"\n                    aria-label={\n                      showPassword\n                        ? t(\"login.hidePassword\", { defaultValue: \"إخفاء كلمة المرور\" })\n                        : t(\"login.showPassword\", { defaultValue: \"إظهار كلمة المرور\" })\n                    }\n                  >\n                    {showPassword ? (\n                      <EyeOff className=\"h-4 w-4\" />\n                    ) : (\n                      <Eye className=\"h-4 w-4\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              {/* Login Button */}\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    {t(\"login.loggingIn\")}\n                  </div>\n                ) : (\n                  t(\"login.loginButton\")\n                )}\n              </Button>\n            </form>\n\n            {/* OAuth Separator */}\n            <div className=\"relative my-6\">\n              <Separator />\n              <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 px-4\">\n                <span className=\"text-sm text-gray-500\">{t(\"login.or\")}</span>\n              </div>\n            </div>\n\n            {/* OAuth Buttons */}\n            <div className=\"space-y-3\">\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={() => handleOAuthLogin(\"Google\")}\n                disabled={isLoading}\n              >\n                <Chrome className=\"w-5 h-5 ml-2\" />\n                {t(\"login.continueWithGoogle\")}\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={() => handleOAuthLogin(\"Microsoft\")}\n                disabled={isLoading}\n              >\n                <svg\n                  className=\"w-5 h-5 ml-2\"\n                  viewBox=\"0 0 23 23\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path fill=\"#f25022\" d=\"M0 0h11v11H0z\" />\n                  <path fill=\"#00a4ef\" d=\"M12 0h11v11H12z\" />\n                  <path fill=\"#7fba00\" d=\"M0 12h11v11H0z\" />\n                  <path fill=\"#ffb900\" d=\"M12 12h11v11H12z\" />\n                </svg>\n                {t(\"login.continueWithMicrosoft\")}\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={() => handleOAuthLogin(\"LinkedIn\")}\n                disabled={isLoading}\n              >\n                <Linkedin className=\"w-5 h-5 ml-2\" />\n                {t(\"login.continueWithLinkedIn\")}\n              </Button>\n            </div>\n\n            {/* Sign Up Link */}\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {t(\"login.noAccount\")}{\" \"}\n                <Link href=\"/signup\">\n                  <a className=\"text-blue-600 hover:text-blue-700 font-semibold\">\n                    {t(\"login.signUpNow\")}\n                  </a>\n                </Link>\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Additional Help */}\n        <div className=\"mt-6 text-center\">\n          <p className=\"text-sm text-gray-500\">\n            {t(\"login.needHelp\")}{\" \"}\n            <Link href=\"/faq\">\n              <a className=\"text-blue-600 hover:text-blue-700\">\n                {t(\"login.contactSupport\")}\n              </a>\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Login","t","useTranslation","setLocation","useLocation","showPassword","setShowPassword","useState","isLoading","setIsLoading","formData","setFormData","loginMutation","trpc","data","toast","error","handleLogin","e","handleOAuthLogin","provider","jsxs","jsx","BackButton","Sparkles","Card","CardHeader","CardTitle","CardDescription","CardContent","Label","Mail","Input","Link","Lock","EyeOff","Eye","Button","Separator","Chrome","Linkedin"],"mappings":"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"}