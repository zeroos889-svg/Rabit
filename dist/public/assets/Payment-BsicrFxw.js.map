{"version":3,"file":"Payment-BsicrFxw.js","sources":["../../../client/src/pages/Payment.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { CheckCircle2, AlertCircle, Loader2 } from \"lucide-react\";\n\ninterface PaymentProps {\n  planName: string;\n  price: number;\n  currency?: string;\n  onSuccess?: () => void;\n}\n\nexport default function Payment({\n  planName,\n  price,\n  currency = \"SAR\",\n  onSuccess,\n}: PaymentProps) {\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [cardData, setCardData] = useState({\n    cardNumber: \"\",\n    cardName: \"\",\n    expiryDate: \"\",\n    cvv: \"\",\n  });\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setCardData(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handlePayment = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // محاكاة معالجة الدفع\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      // TODO: ربط Moyasar أو Tap Payments هنا\n      console.log(\"[Payment] Simulated payment for:\", { planName, price });\n      setSuccess(true);\n\n      // استدعاء callback عند النجاح\n      if (onSuccess) {\n        setTimeout(() => {\n          onSuccess();\n        }, 2000);\n      }\n    } catch (err) {\n      setError(\"حدث خطأ أثناء معالجة الدفع. يرجى المحاولة مرة أخرى.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n        <Card className=\"w-full max-w-md p-8 text-center\">\n          <CheckCircle2 className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\n          <h1 className=\"text-2xl font-bold mb-2\">تم الدفع بنجاح!</h1>\n          <p className=\"text-muted-foreground mb-4\">\n            شكراً لاختيارك {planName}. سيتم تفعيل حسابك قريباً.\n          </p>\n          <p className=\"text-sm text-muted-foreground\">\n            سيتم إعادة توجيهك إلى لوحة التحكم...\n          </p>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <div className=\"max-w-md mx-auto\">\n        {/* ملخص الطلب */}\n        <Card className=\"mb-6 p-6\">\n          <h2 className=\"text-xl font-bold mb-4\">ملخص الطلب</h2>\n          <div className=\"space-y-2 mb-4\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">الباقة:</span>\n              <span className=\"font-semibold\">{planName}</span>\n            </div>\n            <div className=\"flex justify-between text-lg font-bold border-t pt-2\">\n              <span>الإجمالي:</span>\n              <span className=\"text-primary\">\n                {price} {currency}\n              </span>\n            </div>\n          </div>\n          <p className=\"text-xs text-muted-foreground\">\n            * هذه نسخة تجريبية. لا يتم خصم أي مبالغ فعلية.\n          </p>\n        </Card>\n\n        {/* نموذج الدفع */}\n        <Card className=\"p-6\">\n          <h2 className=\"text-xl font-bold mb-6\">بيانات الدفع</h2>\n\n          {error && (\n            <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex gap-2\">\n              <AlertCircle className=\"h-5 w-5 text-red-500 flex-shrink-0\" />\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          <form onSubmit={handlePayment} className=\"space-y-4\">\n            {/* اسم المالك */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">\n                اسم المالك\n              </label>\n              <Input\n                type=\"text\"\n                name=\"cardName\"\n                placeholder=\"أحمد محمد\"\n                value={cardData.cardName}\n                onChange={handleInputChange}\n                required\n                disabled={loading}\n              />\n            </div>\n\n            {/* رقم البطاقة */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">\n                رقم البطاقة\n              </label>\n              <Input\n                type=\"text\"\n                name=\"cardNumber\"\n                placeholder=\"1234 5678 9012 3456\"\n                value={cardData.cardNumber}\n                onChange={handleInputChange}\n                maxLength={19}\n                required\n                disabled={loading}\n              />\n            </div>\n\n            {/* تاريخ الانتهاء و CVV */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">\n                  انتهاء الصلاحية\n                </label>\n                <Input\n                  type=\"text\"\n                  name=\"expiryDate\"\n                  placeholder=\"MM/YY\"\n                  value={cardData.expiryDate}\n                  onChange={handleInputChange}\n                  maxLength={5}\n                  required\n                  disabled={loading}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">CVV</label>\n                <Input\n                  type=\"text\"\n                  name=\"cvv\"\n                  placeholder=\"123\"\n                  value={cardData.cvv}\n                  onChange={handleInputChange}\n                  maxLength={4}\n                  required\n                  disabled={loading}\n                />\n              </div>\n            </div>\n\n            {/* زر الدفع */}\n            <Button\n              type=\"submit\"\n              className=\"w-full h-12 text-base font-semibold\"\n              disabled={loading}\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  جاري المعالجة...\n                </>\n              ) : (\n                `ادفع الآن ${price} ${currency}`\n              )}\n            </Button>\n\n            {/* رسالة أمان */}\n            <p className=\"text-xs text-center text-muted-foreground\">\n              ✓ معاملتك آمنة وموثوقة\n            </p>\n          </form>\n        </Card>\n\n        {/* معلومات إضافية */}\n        <div className=\"mt-6 text-center text-sm text-muted-foreground\">\n          <p>هل لديك أسئلة؟</p>\n          <a href=\"/contact\" className=\"text-primary hover:underline\">\n            تواصل معنا\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Payment","planName","price","currency","onSuccess","loading","setLoading","useState","success","setSuccess","error","setError","cardData","setCardData","handleInputChange","e","name","value","prev","handlePayment","resolve","jsxs","Card","jsx","CheckCircle2","AlertCircle","Input","Button","Fragment","Loader2"],"mappings":"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"}