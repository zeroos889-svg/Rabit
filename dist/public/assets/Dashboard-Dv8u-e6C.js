import{j as e,r as D}from"./ui-vendor-C96WIwkg.js";import{h as S,t as b,C as d,f as m,T as v,L as h,B as c,c as u,j as T,K as A,o as q,d as p,e as w,b as R}from"./index-Bkz6h1fQ.js";import{S as y}from"./skeleton-CH6Aula-.js";import{B as k}from"./badge-DdDRUR73.js";import{B}from"./bell-BqXFjnTJ.js";import{C as L}from"./clock-BFXiIUou.js";import{S as I}from"./shield-D1nyOWBv.js";import{S as P,a as H,b as z,c as E,d as N}from"./select-B0y6YODy.js";import{D as M}from"./dollar-sign-BRdvXPnQ.js";import{E as Q}from"./earth-f2tXVJgF.js";import"./react-vendor-DDxydHEc.js";import"./query-vendor-Dpt6u7bR.js";import"./chart-vendor-8DIN3ZwM.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=S("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function $(){const{data:a}=b.adminPdpl.getRequests.useQuery(),{data:o}=b.adminPdpl.getIncidents.useQuery(),n=a?.requests?.filter(t=>{if(t.status==="done"||t.status==="rejected")return!1;const r=new Date(t.createdAt);return 30-Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60*24))<=5})||[],i=a?.requests?.filter(t=>{if(t.status==="done"||t.status==="rejected")return!1;const r=new Date(t.createdAt);return Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60*24))>30})||[],l=o?.incidents?.filter(t=>{if(t.reportedToSdaiaAt)return!1;const r=new Date(t.detectedAt);return 72-Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60))<=12})||[],s=o?.incidents?.filter(t=>{if(t.reportedToSdaiaAt)return!1;const r=new Date(t.detectedAt);return Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60))>72})||[],x=i.length+s.length+n.length+l.length;return x===0?null:e.jsx(d,{className:"border-amber-200 bg-amber-50",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-amber-900",children:["تنبيهات PDPL (",x,")"]}),e.jsx(k,{variant:"destructive",className:"bg-amber-600",children:"يتطلب انتباه"})]}),e.jsxs("div",{className:"space-y-2",children:[i.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium text-red-900",children:[i.length," طلب متأخر (أكثر من 30 يوم)"]})]}),e.jsx(h,{href:"/admin/data-requests",children:e.jsxs(c,{size:"sm",variant:"destructive",children:["عرض",e.jsx(j,{className:"h-3 w-3 mr-1"})]})})]}),n.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-100 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:[n.length," طلب عاجل (أقل من 5 أيام)"]})]}),e.jsx(h,{href:"/admin/data-requests",children:e.jsxs(c,{size:"sm",variant:"outline",className:"border-amber-300",children:["عرض",e.jsx(j,{className:"h-3 w-3 mr-1"})]})})]}),s.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium text-red-900",children:[s.length," حادث متأخر (أكثر من 72 ساعة)"]})]}),e.jsx(h,{href:"/admin/security-incidents",children:e.jsxs(c,{size:"sm",variant:"destructive",children:["عرض",e.jsx(j,{className:"h-3 w-3 mr-1"})]})})]}),l.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-100 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:[l.length," حادث عاجل (أقل من 12 ساعة)"]})]}),e.jsx(h,{href:"/admin/security-incidents",children:e.jsxs(c,{size:"sm",variant:"outline",className:"border-amber-300",children:["عرض",e.jsx(j,{className:"h-3 w-3 mr-1"})]})})]})]}),e.jsxs("p",{className:"text-xs text-amber-800",children:[e.jsx("strong",{children:"تذكير:"})," يجب الرد على طلبات الحقوق خلال 30 يوم، والإبلاغ عن الخروقات خلال 72 ساعة (متطلبات PDPL)"]})]})]})})})}function se(){const{data:a,isLoading:o}=b.admin.getStats.useQuery(),[n,i]=D.useState("sa-gcc");if(o)return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"لوحة التحكم الإدارية"}),e.jsx("div",{className:"mb-6",children:e.jsx($,{})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(s=>e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(y,{className:"h-4 w-24"})}),e.jsx(m,{children:e.jsx(y,{className:"h-8 w-16"})})]},s))})]});const l=[{title:"إجمالي المستخدمين",value:a?.totalUsers||0,icon:T,description:"عدد المستخدمين المسجلين",color:"text-blue-600"},{title:"الاشتراكات النشطة",value:a?.activeSubscriptions||0,icon:A,description:"الاشتراكات الفعالة حالياً",color:"text-green-600"},{title:"الحجوزات المعلقة",value:a?.pendingBookings||0,icon:q,description:"حجوزات تنتظر المعالجة",color:"text-orange-600"},{title:"إجمالي الإيرادات",value:`${((a?.totalRevenue||0)/100).toLocaleString("ar-SA")} ﷼`,icon:M,description:"الإيرادات الإجمالية",color:"text-purple-600"}];return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"لوحة التحكم الإدارية"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"مرحباً بك في لوحة التحكم الإدارية لمنصة رابِط"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:l.map(s=>{const x=s.icon;return e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx(x,{className:`h-5 w-5 ${s.color}`})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]},s.title)})}),e.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"نظرة عامة"}),e.jsx(w,{children:"إحصائيات سريعة عن المنصة"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"معدل التحويل"}),e.jsx("span",{className:"font-medium",children:"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"متوسط قيمة الاشتراك"}),e.jsx("span",{className:"font-medium",children:"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"معدل الاحتفاظ"}),e.jsx("span",{className:"font-medium",children:"-"})]})]})})]}),e.jsxs(d,{children:[e.jsxs(u,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-purple-600"}),"إعدادات منطقة البيانات"]}),e.jsx(w,{children:"اختر موقع استضافة البيانات: sa-gcc | eu | us"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs(P,{value:n,onValueChange:s=>i(s),children:[e.jsx(H,{className:"w-full",children:e.jsx(z,{placeholder:"اختر المنطقة"})}),e.jsxs(E,{children:[e.jsx(N,{value:"sa-gcc",children:"sa-gcc (الرياض)"}),e.jsx(N,{value:"eu",children:"eu (فرانكفورت)"}),e.jsx(N,{value:"us",children:"us (أوريغون)"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يطبق على تخزين المستندات والسجلات. يتطلب إعادة تشغيل الخدمات عند التبديل."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{onClick:()=>R.success(`تم حفظ المنطقة: ${n}`),className:"bg-gradient-to-r from-purple-600 to-blue-600",children:"حفظ الإعداد"}),e.jsx(c,{variant:"outline",onClick:()=>i("sa-gcc"),children:"إعادة التعيين لـ sa-gcc"})]})]})]})]})]})}export{se as default};
